{% extends 'base.html' %}
{% load tailwind_filters %}

{% block content %}
<div class="w-full mb-6 py-6 flex justify-between items-center border-b border-gray-200">
    <div>
        <h1 class="ml-8 text-4xl text-gray-800">Properties</h1>
    </div>
    {% if request.user.is_organisor %}
    <div>
        <a class="mr-10 inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700" href="{% url 'leads:property-create' %}">
            Create a new property
        </a>
        <a class="mr-40 inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700" href="{% url 'leads:select_properties' %}">
            Update
        </a>
    </div>
    {% endif %}
</div>

<!-- Flexbox container for properties -->
<div class="flex flex-wrap -mx-4">
    {% for property in properties %}

    <div class="w-full md:w-1/3 lg:w-1/4 px-4 mb-6 group">
        <div class="bg-white shadow-lg rounded-lg overflow-hidden relative">
            <div style="{% if property.is_sold %}background-color:green;  {% else %} background-color:red; {% endif %}" class="px-6 py-4">
                <h2 class="font-bold text-xl mb-2">{{ property.title }}</h2>
                <p class="text-gray-700 text-base">Total Price: {{ property.totalprice }}</p>
                <p class="text-gray-700 text-base">Plot type: {{ property.type }}</p>
                <p class="text-gray-700 text-base">Price: ${{ property.price }}</p>
                <p class="text-gray-700 text-base">Sold Status: {% if property.is_sold %} Sold {% else %} Available {% endif %}</p>
            </div>

            <!-- Hidden details to be shown on hover -->
            <div class="absolute top-0 left-0 w-full h-full bg-white opacity-0 group-hover:opacity-100 p-6 transition-opacity duration-300 ease-in-out">
                <h2 class="font-bold text-xl mb-2">{{ property.title }}</h2>
                <p class="text-gray-700 text-base"><strong>Length:</strong> {{ property.length }}</p>
                <p class="text-gray-700 text-base"><strong>Breadth:</strong> {{ property.breadth }}</p>
                <p class="text-gray-700 text-base"><strong>Area:</strong> {{ property.area }} sq.ft.</p>
                <p class="text-gray-700 text-base"><strong>Type:</strong> {{ property.type }}</p>
                <p class="text-gray-700 text-base"><strong>Total Price:</strong> {{ property.totalprice }}</p>
                <p class="text-gray-700 text-base"><strong>Project Name:</strong> {{ property.project_id }}</p>
                <p class="text-gray-700 text-base"><strong>Price:</strong> ${{ property.price }}</p>
                <p class="text-gray-700 text-base"><strong>Agent:</strong> {{ property.agent }}</p>
            </div>
        </div>
    </div>
    {% empty %}
        <div class="bg-red-100 p-4 rounded w-full">No properties available.</div>
    {% endfor %}
</div>
{% endblock content %}
