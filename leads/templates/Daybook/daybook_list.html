{% extends 'base.html' %}

{% block content %}
<div class="max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md">
    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Daily Expenses</h2>
    <p class="text-lg text-gray-600 mb-4">Current Balance: <span class="font-bold text-green-600">₹{{ total_balance }}</span></p>
    <p class="text-lg text-gray-600 mb-4">Today's Total Expenses: <span class="font-bold text-red-600">₹{{ todays_expense }}</span></p>

    <!-- Button to add a new expense -->
    <a href="{% url 'leads:daybook_create' %}" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded mb-4 inline-block">
        Add New Expense
    </a>

    <table class="min-w-full bg-white border border-gray-300 rounded-lg">
        <thead class="bg-gray-100">
            <tr>
                <th class="py-2 px-4 border-b text-left text-gray-600">Date</th>
                <th class="py-2 px-4 border-b text-left text-gray-600">Activity</th>
                <th class="py-2 px-4 border-b text-left text-gray-600">Amount</th>
                <th class="py-2 px-4 border-b text-left text-gray-600">Remark</th>
            </tr>
        </thead>
        <tbody>
            {% for expense in expenses %}
            <tr class="{% cycle 'bg-gray-50' 'bg-white' %}">
                <td class="py-2 px-4 border-b">{{ expense.date }}</td>
                <td class="py-2 px-4 border-b">
                    {{ expense.activity }} {% if expense.custom_activity %} ({{ expense.custom_activity }}) {% endif %}
                </td>
                <td class="py-2 px-4 border-b text-red-500">₹{{ expense.amount }}</td>
                <td class="py-2 px-4 border-b">{{ expense.remark }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" class="py-2 px-4 border-b text-center text-gray-600">No expenses recorded for today.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
